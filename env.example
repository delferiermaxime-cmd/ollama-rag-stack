# =============================================================================
# FICHIER DE CONFIGURATION - Variables d'environnement
# =============================================================================
# INSTRUCTIONS :
#   1. Copiez ce fichier : cp .env.example .env
#   2. Modifiez les valeurs selon vos besoins
#   3. Les valeurs par défaut fonctionnent pour un déploiement local standard
#
# SÉCURITÉ :
#   - Ne partagez JAMAIS votre fichier .env
#   - Changez les mots de passe par défaut en production
#   - Le fichier .env est ignoré par Git (voir .gitignore)
# =============================================================================

# =============================================================================
# VERSIONS DES IMAGES DOCKER
# =============================================================================
# Fixez les versions pour garantir la reproductibilité du déploiement.
# "latest" utilise la dernière version disponible (pratique mais moins stable).
OLLAMA_VERSION=latest
QDRANT_VERSION=latest
ANYTHINGLLM_VERSION=latest

# =============================================================================
# CONFIGURATION OLLAMA
# =============================================================================
# Port d'accès à l'API Ollama sur la machine hôte
OLLAMA_PORT=11434

# Nombre de requêtes traitées en parallèle
# Augmentez si plusieurs utilisateurs utilisent le système simultanément
# Attention : chaque requête parallèle consomme de la RAM/VRAM supplémentaire
OLLAMA_NUM_PARALLEL=1

# Durée (en secondes) avant de décharger un modèle inactif de la mémoire
# 300 = 5 minutes | 0 = ne jamais décharger | -1 = décharger immédiatement
OLLAMA_KEEP_ALIVE=300

# [GPU uniquement] Nombre de couches du modèle sur le GPU
# -1 = toutes les couches sur GPU (utilise toute la VRAM disponible)
# Nombre positif = nombre de couches sur GPU, le reste sur CPU (RAM)
OLLAMA_GPU_LAYERS=-1

# =============================================================================
# CONFIGURATION QDRANT
# =============================================================================
# Port de l'API REST (requêtes HTTP)
QDRANT_REST_PORT=6333

# Port de l'API gRPC (protocole binaire, plus performant)
QDRANT_GRPC_PORT=6334

# Clé API pour sécuriser l'accès à Qdrant
# Laissez vide pour un accès sans authentification (développement local)
# IMPORTANT : Définissez une clé en production !
QDRANT_API_KEY=

# =============================================================================
# CONFIGURATION ANYTHINGLLM
# =============================================================================
# Port de l'interface web d'AnythingLLM
ANYTHINGLLM_PORT=3001

# Mot de passe pour protéger l'accès à l'interface web
# Laissez vide pour un accès libre (développement local uniquement)
ANYTHINGLLM_AUTH_TOKEN=

# Clé secrète JWT pour l'API d'AnythingLLM
# IMPORTANT : Changez cette valeur en production !
JWT_SECRET=your-super-secret-jwt-key-change-me

# =============================================================================
# CONFIGURATION DES MODÈLES PAR DÉFAUT
# =============================================================================
# Modèle LLM utilisé par défaut dans AnythingLLM pour les conversations
DEFAULT_LLM_MODEL=llama3.1:latest

# Modèle d'embedding utilisé par défaut pour indexer les documents
DEFAULT_EMBEDDING_MODEL=nomic-embed-text:latest

# Taille maximale des chunks lors du découpage des documents (en tokens)
# Plus grand = plus de contexte par chunk, mais plus lent à indexer
EMBEDDING_CHUNK_LENGTH=8192

# =============================================================================
# CONFIGURATION DU CONTEXTE LLM
# =============================================================================
# Taille maximale du contexte du modèle LLM (en tokens)
MODEL_TOKEN_LIMIT=8192

# =============================================================================
# MULTI-UTILISATEURS
# =============================================================================
# Le mode multi-utilisateurs est activé depuis l'interface web d'AnythingLLM
# (Settings > Security > Enable multi-user mode).
#
# IMPORTANT : Une fois activé, le retour au mode single-user est IMPOSSIBLE.
#
# Rôles disponibles :
#   - Admin   : Accès total (settings, logs, analytics, gestion utilisateurs)
#   - Manager : Gère les workspaces et propriétés, pas les settings système
#   - Default : Limité aux workspaces auxquels il est assigné
#
# Les variables ci-dessous sont OPTIONNELLES et concernent des cas avancés.

# Empêcher les admins/managers de voir l'historique de chat des autres users
# Décommentez pour activer (n'importe quelle valeur active la fonctionnalité)
# DISABLE_VIEW_CHAT_HISTORY=enable

# Durée de validité des sessions JWT (défaut : 7 jours)
# Formats : "30d" (30 jours), "24h" (24 heures), etc.
# JWT_EXPIRY=7d

# =============================================================================
# SSO SIMPLE (Single Sign-On) - OPTIONNEL / AVANCÉ
# =============================================================================
# Permet d'intégrer AnythingLLM dans un système d'auth existant.
# Les utilisateurs reçoivent un lien temporaire qui les connecte automatiquement.
#
# PRÉREQUIS :
#   1. Le mode multi-utilisateurs doit être activé
#   2. Au moins un admin doit exister
#   3. Une clé API AnythingLLM doit être provisionnée
#
# Décommentez pour activer :
# SIMPLE_SSO_ENABLED=enable
#
# Désactive la page de login traditionnelle (utilisateurs SSO uniquement) :
# SIMPLE_SSO_NO_LOGIN=enable
